{% extends "base.html" %}  

{% block content %}  
<div class="container">  
    <h1>Add New Password</h1>   
    
    {% with messages = get_flashed_messages(with_categories=true) %}    
        {% if messages %}

            <div class = "flash-messages">   
                {% for category, message in messages %}  

                    <p class = "{{ category }}">{{ message }}</p>
                {% endfor %}    
            </div>

        {% endif %}   
    {% endwith %}  
    
    <form method="POST" action="{{ url_for('views.add_secret') }}">
        {{ csrf_token }}

        <div class = "form-group">    
            <label for = "label">Label/Website</label>   
            <input type = "text" id = "label" name = "label" required  
                   pattern = "[\w\s\-\.]{1,100}"     
                   title = "Alphanumeric characters, spaces, hyphens and dots only."    
                   placeholder = "e.g., Gmail, Facebook, etc.">   
        </div>  
         
        <div class = "form-group">  
            <label for = "site_username">Username</label>   
            <input type = "text" id = "site_username" name = "site_username" required   
                   placeholder = "Account username or email">
        </div> 
        
        <div class = "form-group">   
            <label for = "password">Password</label> 
            <input type = "password" id = "password" name = "password" required>   
            <button type = "button" onclick="togglePassword()">Show/Hide</button>   
        </div>  
         
        <div class = "button-group">  
            <button type = "submit">Save Password</button>      
            <button type = "button" onclick = "window.location.href = '{{ url_for('views.vault') }}'">Cancel</button>  
        </div>   
    </form>    
</div>  

<style>   
    .container { max-width: 600px; margin: auto; padding: 20px; } 
    .form-group { margin-bottom: 20px; }  
    .form-group label { display: block; margin-bottom: 5px; }    
    .form-group input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }    
    .button-group { display: flex; gap: 10px; }    
    .button-group button { padding: 10px 20px; }   
    .flash-messages { margin: 10px 0; }   
    .success { color: green; }  
    .error { color: red; }   
</style>      

<script>    
function togglePassword() { const pwd = document.getElementById('password');  
                            pwd.type = pwd.type === 'password' ? 'text' : 'password'; }  
</script>   
{% endblock %}